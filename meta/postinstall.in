#!@SHELL@
# postinstall --
#
# Post installation script for UCL.

set -e

PACKAGE_NAME='@PACKAGE_NAME@'
PACKAGE_NAME_LOWERCASE='@PACKAGE_NAME_LOWERCASE@'
PACKAGE_XVERSION='@PACKAGE_XVERSION@'
PKG_ID="${PACKAGE_NAME}-${PACKAGE_XVERSION}"
PKG_DIR='@PKG_DIR@'
PROGNAME="${PKG_ID} postinstall"

prefix="@prefix@"
exec_prefix="@exec_prefix@"
libdir="@libdir@"

ucl_stub_SHARED_LIBRARY_NAME=@ucl_stub_SHARED_LIBRARY_NAME@
ucl_stub_SHARED_LIBRARY_LINK_NAME=@ucl_stub_SHARED_LIBRARY_LINK_NAME@

if test -f "${libdir}/${ucl_stub_SHARED_LIBRARY_NAME}" ; then
    PROMPT=$(printf "%s: link shared stub library '%s' to '%s'? [yes|no] " \
        "${PROGNAME}" "${ucl_stub_SHARED_LIBRARY_NAME}" "${ucl_stub_SHARED_LIBRARY_LINK_NAME}")
    REPLY=
    while test "${REPLY}" != 'yes' -a "${REPLY}" != 'no'
      do read -p "${PROMPT}"
    done

    if test "${REPLY}" = 'yes' ; then
        printf '%s: entering directory "%s"...\n' "${PROGNAME}" "${libdir}"
        cd "${libdir}"
        printf '%s: linking...\n' "${PROGNAME}"
        ln -sf "${ucl_stub_SHARED_LIBRARY_NAME}" "${ucl_stub_SHARED_LIBRARY_LINK_NAME}"
        printf '%s: done.\n' "${PROGNAME}"
    fi
fi

exit 0

### end of file
# Local Variables:
# mode: sh
# End:
