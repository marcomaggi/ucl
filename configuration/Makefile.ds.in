## Makefile.ds --
# 
# @configure_input@

#page
## ------------------------------------------------------------
## Global variables.
## ------------------------------------------------------------

CONTAINERS	= btree circular hash heap list map tree vector graph

INCLUDES	+= -I$(srcdir)/stub -I$(ucl_SRCDIR)

# This is defined in "Makefile.library". Here we exclude '-Wcast-qual';
# in this library we need to cast types to exclude the 'const'
# qualifier.

C_WARNINGS := $(filter-out -Wcast-qual,$(C_WARNINGS))

## ------------------------------------------------------------

#page
## ------------------------------------------------------------
## Libraries.
## ------------------------------------------------------------

$(eval $(call ds-c-library-with-stub,ucl))

## ------------------------------------------------------------

ifeq ($(strip $(ds_config_ENABLE_STUB)),yes)
UCL_LIBS	= -L$(ucl_stub_shared_library_BUILDDIR) -l$(ucl_stub_shared_library_ID)
else
UCL_LIBS	= -L$(ucl_shared_library_BUILDDIR) -l$(ucl_shared_library_ID)
endif # ds_config_ENABLE_STUB = yes

## ------------------------------------------------------------

#page
## ------------------------------------------------------------
## Tests.
## ------------------------------------------------------------

ucl_shared_tests_BUILDDIR		= $(builddir)/shared-tests.d
ucl_shared_tests_PREREQUISITES		= $(ucl_SRCDIR)/ucl.h
ucl_shared_tests_CC_COMPILE_MORE_FLAGS	= -I$(ucl_SRCDIR) -I$(ucl_stubsrc_BUILDDIR)
ucl_shared_tests_programs_PREFIX	= shared-
ucl_shared_tests_programs_ENV		= LD_LIBRARY_PATH=$(ucl_shared_library_BUILDDIR)
ucl_shared_tests_programs_CC_BUILD_PROGRAM_PRE = $(UCL_UCL_LIBS) \
	-L$(ucl_shared_library_BUILDDIR) -l$(ucl_shared_library_ID)

$(eval $(call ds-c-test-programs,ucl_shared))

## ------------------------------------------------------------

ucl_stub_tests_BUILDDIR			= $(builddir)/stub-tests.d
ucl_stub_tests_PREREQUISITES		= $(ucl_SRCDIR)/ucl.h
ucl_stub_tests_CC_COMPILE_MORE_FLAGS	= -I$(ucl_SRCDIR) -I$(ucl_stubsrc_BUILDDIR)
ucl_stub_tests_programs_PREFIX		= stub-
ucl_stub_tests_programs_ENV		= LD_LIBRARY_PATH=$(ucl_stub_shared_library_BUILDDIR)
ucl_stub_tests_programs_CC_BUILD_PROGRAM_PRE = $(UCL_UCL_LIBS) \
	-L$(ucl_stub_static_library_BUILDDIR) -l$(ucl_stub_static_library_ID)

$(eval $(call ds-c-test-programs,ucl_stub))

## ------------------------------------------------------------

ucl_static_tests_BUILDDIR		= $(builddir)/static-tests.d
ucl_static_tests_PREREQUISITES		= $(ucl_SRCDIR)/ucl.h
ucl_static_tests_CC_COMPILE_MORE_FLAGS	= -I$(ucl_SRCDIR) -I$(ucl_stubsrc_BUILDDIR)
ucl_static_tests_programs_PREFIX	= static-
ucl_static_tests_programs_ENV		= LD_LIBRARY_PATH=$(ucl_static_library_BUILDDIR)
ucl_static_tests_programs_CC_BUILD_PROGRAM_PRE = $(UCL_UCL_LIBS) \
	-L$(ucl_static_library_BUILDDIR) -l$(ucl_static_library_ID)

$(eval $(call ds-c-test-programs,ucl_static))

## ------------------------------------------------------------

#page
## ------------------------------------------------------------
## Miscelleous stuff.
## ------------------------------------------------------------

ucl_examples_PREREQUISITES		= $(ucl_SRCDIR)/ucl.h
ucl_examples_CC_COMPILE_MORE_FLAGS	= -I$(ucl_SRCDIR) -I$(ucl_stubsrc_BUILDDIR)
ucl_examples_programs_ENV		= LD_LIBRARY_PATH=$(ucl_shared_library_BUILDDIR)

$(eval $(call ds-c-example-programs,ucl))


### end of file
# Local Variables:
# mode: makefile
# End:
